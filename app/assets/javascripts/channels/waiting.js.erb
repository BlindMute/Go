function waitSubscribe(user) {
	App.waiting = App.cable.subscriptions.create({channel: "WaitingChannel", room: 'waiting', user: user}, {
		connected: function () {
			// Called when the subscription is ready for use on the server
			console.log('joined waiting channel')
			//                $(document).on('page:change', function () {
			//                    this.unsubscribe();
			//                })
		},

		disconnected: function () {
			// Called when the subscription has been terminated by the server
			console.log('left lobby')
		},

		received: function (data) {
			I_am = $('body').data().current_user
			if (I_am == data.p1 || I_am == data.p2) {
				this.unsubscribe();
				window.location = '/g/' + data.id
			}

		}
	})
};
