$(document).on('ready', function () {
    if (wrapper = document.getElementById('lobbywrapper')) {
        App.lobby = App.cable.subscriptions.create({channel: "LobbyChannel", room: 'lobby'}, {
            connected: function () {
                // Called when the subscription is ready for use on the server
                console.log('connected to lobby')
                $(document).on('page:change', function () {
                    this.unsubscribe();
                })
            },

            disconnected: function () {
                // Called when the subscription has been terminated by the server
                console.log('left lobby')
            },

            received: function (games) {
                console.log('websocket data recieved in lobby');
                gv.callback(JSON.parse(games));
            }
        })
    }
});